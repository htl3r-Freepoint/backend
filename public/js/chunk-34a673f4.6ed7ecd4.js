(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34a673f4"],{"20e3":function(t,e,s){"use strict";var a=s("afc9"),n=s.n(a);n.a},2708:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-group"},[s("label",{staticClass:"font-weight-bold d-block text-left"},[t._v(t._s(t.label)+" "),s("div",{staticClass:"input-group mt-2"},[t.$slots.prepend?s("span",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._t("prepend")],2)]):t._e(),t._t("default",[s("input",{staticClass:"form-control"})]),t.$slots.append?s("span",{staticClass:"input-group-append"},[s("span",{staticClass:"input-group-text"},[t._t("append")],2)]):t._e()],2)]),s("small",{staticClass:"form-text text-muted text-left"},[t._v(t._s(t.description))])])},n=[],r={name:"FpInput",props:["description","label"]},o=r,i=(s("20e3"),s("2877")),l=Object(i["a"])(o,a,n,!1,null,"a9530a52",null);e["a"]=l.exports},3692:function(t,e,s){},afc9:function(t,e,s){},c39e:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("form",{staticClass:"mb-2"},[s("div",{staticClass:"row"},[s("fp-input",{staticClass:"col-md",attrs:{label:"Email"}},[s("font-awesome-icon",{attrs:{slot:"prepend",icon:"at"},slot:"prepend"}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newUserEmail,expression:"newUserEmail"}],staticClass:"form-control",attrs:{type:"email",placeholder:"User Email"},domProps:{value:t.newUserEmail},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addStaff(e)},input:function(e){e.target.composing||(t.newUserEmail=e.target.value)}}})],1),s("fp-input",{staticClass:"col-md",attrs:{label:"Rolle",description:"Mit den Rollen vergeben Sie den Mitarbeitern Rechte. Ein Member darf nur Rabatte\n              scannen, ein Verwalter darf Rabatte scannen, löschen und bearbeiten und der Owner darf zusätzlich das\n              Geschäft löschen."}},[s("font-awesome-icon",{attrs:{slot:"prepend",icon:"scroll"},slot:"prepend"}),s("select",{directives:[{name:"model",rawName:"v-model",value:t.newUserRole,expression:"newUserRole"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.newUserRole=e.target.multiple?s:s[0]}}},[s("option",{attrs:{disabled:"",value:""}},[t._v("Rolle auswählen")]),s("option",{attrs:{disabled:t.$store.state.user.rights<2},domProps:{value:1}},[t._v("Mitarbeiter")]),s("option",{attrs:{disabled:t.$store.state.user.rights<3},domProps:{value:2}},[t._v("Verwalter")]),s("option",{attrs:{disabled:t.$store.state.user.rights<=3},domProps:{value:3}},[t._v("Besitzer")])])],1)],1),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addStaff}},[s("font-awesome-icon",{attrs:{icon:"user-plus"}}),t._v(" Mitarbeiter Hinzufügen ")],1)]),s("table",{staticClass:"table text-left table-hover table-responsive"},[s("thead",{staticClass:"thead-light"},[s("tr",[s("th",[s("font-awesome-icon",{attrs:{icon:"user"}}),t._v(" Mitarbeiter ")],1),s("th",[s("font-awesome-icon",{attrs:{icon:"envelope"}}),t._v(" Email ")],1),s("th",[s("font-awesome-icon",{attrs:{icon:"scroll"}}),t._v(" Rolle ")],1),s("th")])]),s("tbody",t._l(t.staff,(function(e,a){return s("tr",{key:a},[e.name?s("td",{staticClass:"text-wrap"},[t._v(t._s(e.name))]):s("td",{staticClass:"text-info"},[t._v("Nutzer hat keinen Namen angegeben")]),s("td",[t._v(t._s(e.email))]),s("td",[s("select",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"staffMember.role"}],staticClass:"form-control table-role",attrs:{disabled:e.role>t.$store.state.user.rights},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"role",s.target.multiple?a:a[0])}}},[s("option",{attrs:{disabled:t.$store.state.user.rights<2},domProps:{value:1}},[t._v("Mitarbeiter")]),s("option",{attrs:{disabled:t.$store.state.user.rights<3},domProps:{value:2}},[t._v("Verwalter")]),s("option",{attrs:{disabled:3!==t.$store.state.user.rights},domProps:{value:3}},[t._v("Besitzer")])])]),e.role<=t.$store.state.user.rights?s("td",{staticClass:"d-flex flex-row"},[s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(s){return t.removeStaff(e)}}},[s("font-awesome-icon",{attrs:{icon:"trash"}})],1),s("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(s){return t.editStaff(e)}}},[s("font-awesome-icon",{attrs:{icon:"check"}})],1)]):t._e()])})),0)])])},n=[],r=(s("c975"),s("a434"),s("2708")),o=s("ecee"),i=s("c074");o["c"].add(i["H"],i["m"],i["I"],i["B"],i["L"],i["a"],i["g"]);var l={name:"Staff",components:{FpInput:r["a"]},data:function(){return{staff:[],staffEdit:[],newUserEmail:"",newUserRole:""}},created:function(){this.getStaff()},methods:{getStaff:function(){var t=this;this.$http.post(this.$store.state.url+"/getMitarbeiter",{hash:this.$store.state.user.token,companyName:this.$store.state.company.companyName}).then((function(e){console.debug(e),t.staff=e.data,t.staffEdit=e.data}))},addStaff:function(){var t=this;this.$http.post(this.$store.state.url+"/addMitarbeiter",{hash:this.$store.state.user.token,companyName:this.$store.state.company.companyName,email:this.newUserEmail,role:this.newUserRole}).then((function(e){console.debug(e),t.getStaff()})),this.newUserEmail=""},editStaff:function(t){var e=this;console.debug(t),this.$http.post(this.$store.state.url+"/editMitarbeiter",{hash:this.$store.state.user.token,companyName:this.$store.state.company.companyName,email:t.email,role:t.role}).then((function(t){console.debug(t),e.$http.post(e.$store.state.url+"/getUserRights",{hash:e.$store.state.user.token,companyName:e.$store.state.company.companyName}).then((function(t){console.debug(t),e.$store.state.user.rights=t.data})),e.getStaff()}))},removeStaff:function(t){var e=this;this.$http.post(this.$store.state.url+"/removeMitarbeiter",{hash:this.$store.state.user.token,companyName:this.$store.state.company.companyName,email:t.email}).then((function(s){console.debug(s);var a=e.staff.indexOf(t);a>-1&&e.staff.splice(a,1)})).catch((function(t){console.error(t)}))}}},c=l,u=(s("f6ce"),s("2877")),p=Object(u["a"])(c,a,n,!1,null,"19641c5f",null);e["default"]=p.exports},c975:function(t,e,s){"use strict";var a=s("23e7"),n=s("4d64").indexOf,r=s("a640"),o=s("ae40"),i=[].indexOf,l=!!i&&1/[1].indexOf(1,-0)<0,c=r("indexOf"),u=o("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:l||!c||!u},{indexOf:function(t){return l?i.apply(this,arguments)||0:n(this,t,arguments.length>1?arguments[1]:void 0)}})},f6ce:function(t,e,s){"use strict";var a=s("3692"),n=s.n(a);n.a}}]);
//# sourceMappingURL=chunk-34a673f4.6ed7ecd4.js.map