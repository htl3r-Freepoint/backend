(function(e){function n(n){for(var o,c,i=n[0],s=n[1],u=n[2],d=0,l=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&l.push(a[c][0]),a[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);h&&h(n);while(l.length)l.shift()();return r.push.apply(r,u||[]),t()}function t(){for(var e,n=0;n<r.length;n++){for(var t=r[n],o=!0,c=1;c<t.length;c++){var i=t[c];0!==a[i]&&(o=!1)}o&&(r.splice(n--,1),e=s(s.s=t[0]))}return e}var o={},c={app:0},a={app:0},r=[];function i(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-029ada6d":"c6e99fdb","chunk-00acb6eb":"b00e4146","chunk-1808acc2":"121b1454","chunk-d0a6f908":"dcae8642","chunk-0428075d":"15391320","chunk-0a232284":"6104697d","chunk-265625e2":"5de98c10","chunk-2cac923e":"5ca1f9a6","chunk-2d0deb55":"5043d6f6","chunk-2d22c101":"9ac0f0dd","chunk-34a673f4":"6ed7ecd4","chunk-4bd02905":"741ca04a","chunk-4f99dd32":"fc521e81","chunk-501208dc":"29aade83","chunk-5a9686e5":"554e9ca1","chunk-61f93812":"51f208c5","chunk-7c849497":"6c9a60c7","chunk-5c7250d3":"bbac7116","chunk-61bb673a":"60e9e472","chunk-0d8ab08d":"ae4181e4","chunk-6f1ad6de":"71383bb9","chunk-97e13c1e":"d8a90b20","chunk-6575ea22":"59e7de02","chunk-6b50f406":"e75c3269","chunk-88bd8f20":"4057598b","chunk-88f20fe6":"b48727c1","chunk-8fd28370":"21ac3fe6","chunk-9ac63260":"05d01c4b","chunk-c74d18e8":"b8de5a1e","chunk-e22a679e":"e6fe5dec","chunk-e99de860":"fb415f58","chunk-0f8ed65b":"d3180051","chunk-2d216214":"e39f12c4","chunk-2d216257":"256ee085"}[e]+".js"}function s(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.e=function(e){var n=[],t={"chunk-029ada6d":1,"chunk-00acb6eb":1,"chunk-1808acc2":1,"chunk-d0a6f908":1,"chunk-0428075d":1,"chunk-0a232284":1,"chunk-265625e2":1,"chunk-2cac923e":1,"chunk-34a673f4":1,"chunk-4bd02905":1,"chunk-4f99dd32":1,"chunk-501208dc":1,"chunk-5a9686e5":1,"chunk-61f93812":1,"chunk-7c849497":1,"chunk-5c7250d3":1,"chunk-0d8ab08d":1,"chunk-6f1ad6de":1,"chunk-97e13c1e":1,"chunk-6575ea22":1,"chunk-6b50f406":1,"chunk-88bd8f20":1,"chunk-88f20fe6":1,"chunk-8fd28370":1,"chunk-9ac63260":1,"chunk-c74d18e8":1,"chunk-e22a679e":1,"chunk-e99de860":1};c[e]?n.push(c[e]):0!==c[e]&&t[e]&&n.push(c[e]=new Promise((function(n,t){for(var o="css/"+({}[e]||e)+"."+{"chunk-029ada6d":"2e1f6adb","chunk-00acb6eb":"687b7bbf","chunk-1808acc2":"18262e03","chunk-d0a6f908":"e57d5185","chunk-0428075d":"49c20f9b","chunk-0a232284":"8d0819a1","chunk-265625e2":"87c8517a","chunk-2cac923e":"e1abbd44","chunk-2d0deb55":"31d6cfe0","chunk-2d22c101":"31d6cfe0","chunk-34a673f4":"42e5a3af","chunk-4bd02905":"1aa93ae0","chunk-4f99dd32":"6dfc2696","chunk-501208dc":"f81ed1ca","chunk-5a9686e5":"27b28951","chunk-61f93812":"f3982885","chunk-7c849497":"d87fb70e","chunk-5c7250d3":"be4b73fb","chunk-61bb673a":"31d6cfe0","chunk-0d8ab08d":"00adec12","chunk-6f1ad6de":"84f55e92","chunk-97e13c1e":"019423e2","chunk-6575ea22":"6c4d8d99","chunk-6b50f406":"f81ed1ca","chunk-88bd8f20":"ee305da4","chunk-88f20fe6":"07e04ed8","chunk-8fd28370":"8b3ea164","chunk-9ac63260":"83258508","chunk-c74d18e8":"a7ea71e0","chunk-e22a679e":"7bae7773","chunk-e99de860":"ee305da4","chunk-0f8ed65b":"31d6cfe0","chunk-2d216214":"31d6cfe0","chunk-2d216257":"31d6cfe0"}[e]+".css",a=s.p+o,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var u=r[i],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===o||d===a))return n()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){u=l[i],d=u.getAttribute("data-href");if(d===o||d===a)return n()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=n,h.onerror=function(n){var o=n&&n.target&&n.target.src||a,r=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=o,delete c[e],h.parentNode.removeChild(h),t(r)},h.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){c[e]=0})));var o=a[e];if(0!==o)if(o)n.push(o[2]);else{var r=new Promise((function(n,t){o=a[e]=[n,t]}));n.push(o[2]=r);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=i(e);var l=new Error;u=function(n){d.onerror=d.onload=null,clearTimeout(h);var t=a[e];if(0!==t){if(t){var o=n&&("load"===n.type?"missing":n.type),c=n&&n.target&&n.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+c+")",l.name="ChunkLoadError",l.type=o,l.request=c,t[1](l)}a[e]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(n)},s.m=e,s.c=o,s.d=function(e,n,t){s.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,n){if(1&n&&(e=s(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)s.d(t,o,function(n){return e[n]}.bind(null,o));return t},s.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(n,"a",n),n},s.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=n,u=u.slice();for(var l=0;l<u.length;l++)n(u[l]);var h=d;r.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"56d7":function(e,n,t){"use strict";t.r(n);t("c740"),t("a15b"),t("a434"),t("e260"),t("e6cf"),t("cca6"),t("a79d");var o=t("2b0e"),c=t("2f62"),a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("navigationsleiste"),this.$store.getters.showVerification?t("div",[e._v(" Bitte verifizieren sie ihre Email Addresse. "),t("a",{attrs:{href:""},on:{click:e.sendVerificationEmail}},[e._v("Email erneut senden")])]):e._e(),t("router-view",{staticClass:"router-view"})],1)},r=[],i=(t("caad"),t("ac1f"),t("5319"),t("1276"),function(){var e=this,n=e.$createElement,o=e._self._c||n;return o("nav",{staticClass:"sticky-top shadow-lg",attrs:{id:"navbar"}},[o("header",{staticClass:"justify-content-center py-2",attrs:{id:"nav-header"}},[o("div",{staticClass:"col-6 col-sm-3"},[this.$store.state.company.logo?o("a",{attrs:{href:"/"}},[e._v(" "+e._s(this.$store.state.company.logo)+" ")]):o("a",{attrs:{href:"/"}},[o("img",{attrs:{src:t("bf1d"),height:"30"}})])]),this.$store.state.user.token?o("div",{staticClass:"col-6 col-sm-3"},[o("div",{staticClass:"font-weight-bold text-nowrap",attrs:{id:"nav-points"}},[e._v(" "+e._s(e.navNumber)+" "),o("font-awesome-icon",{attrs:{icon:"receipt"}})],1)]):o("div",{staticClass:"col-6 col-sm-3"}),o("navigation-links",{staticClass:"col-sm-3",attrs:{id:"icons-header"}})],1),o("footer",{attrs:{id:"nav-footer"}},[o("navigation-links")],1)])}),s=[],u=(t("b680"),function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"row justify-content-between flex-nowrap"},[t("router-link",{staticClass:"col router-link icon",attrs:{to:"/"}},[t("font-awesome-icon",{attrs:{icon:"home"}})],1),this.$store.state.user.token&&this.$store.state.company.companyName?t("router-link",{staticClass:"col router-link",attrs:{to:"/inventar"}},[t("font-awesome-icon",{attrs:{icon:"cubes"}})],1):e._e(),this.$store.state.user.token&&this.$store.state.company.companyName?t("router-link",{staticClass:"col router-link",attrs:{to:"/scan"}},[t("font-awesome-icon",{attrs:{icon:"qrcode"}})],1):e._e(),this.$store.state.user.token?t("router-link",{staticClass:"col router-link",attrs:{to:"/user/profile"}},[t("font-awesome-icon",{attrs:{icon:"cog"}})],1):e._e(),this.$store.state.user.token?t("button",{staticClass:"col router-link red",on:{click:e.logoutUser}},[t("font-awesome-icon",{attrs:{icon:"sign-out-alt"}})],1):t("router-link",{staticClass:"col router-link",attrs:{to:"/login"}},[t("font-awesome-icon",{attrs:{icon:"sign-in-alt"}})],1)],1)}),d=[],l=t("ecee"),h=t("c074");l["c"].add(h["o"],h["k"],h["y"],h["h"],h["F"],h["I"],h["G"]);var f={name:"NavigationLinks",methods:{logoutUser:function(){localStorage.removeItem("user"),sessionStorage.removeItem("user"),this.$store.commit("deleteUser"),this.$router.push("/")}}},p=f,m=(t("d451"),t("2877")),k=Object(m["a"])(p,u,d,!1,null,"120481a8",null),b=k.exports,g=t("cffa");l["c"].add(h["A"]);var v={name:"Navigationsleiste",components:{NavigationLinks:b},data:function(){return{tweenedNumber:0}},computed:{navNumber:function(){return this.tweenedNumber.toFixed(0)}},watch:{"$store.state.points":function(e){g["a"].to(this.$data,{duration:.5,tweenedNumber:e})}}},y=v,w=(t("e887"),Object(m["a"])(y,i,s,!1,null,"70d5f86a",null)),C=w.exports,P={name:"App",components:{Navigationsleiste:C},created:function(){this.loadUserData();var e=window.location.host.split(".");if(e.length>1){var n=e.shift();console.log("Company URL:",n),console.debug("Other URLs:",e);var t=["freepoint","www","localhost","localhost:8080"];t.includes(n)?t.includes(e[0])||(console.debug(e),this.sendBack(e)):this.loadCompanyInformation(n,e)}},methods:{sendVerificationEmail:function(){console.debug("Resending verification email"),this.$http.post(this.$store.state.url+"/sendEmail",{hash:this.$store.state.user.token}).catch((function(e){return console.error(e)}))},sendBack:function(e){window.location.replace(document.location.protocol+"//"+e.join("."))},loadCompanyInformation:function(e,n){var t=this;console.debug("Loading company information"),this.$http.post(this.$store.state.url+"/getCompany",{companyName:e}).then((function(e){console.debug(e),console.debug("Saving company information"),t.$store.commit("setCompany",e.data.company),t.loadColorPalette(),t.getUserPoints()})).catch((function(e){console.error(e),t.sendBack(n)}))},loadUserData:function(){console.debug("Loading login information from cookies"),localStorage.getItem("user")?(this.$store.commit("setUser",JSON.parse(localStorage.getItem("user"))),console.debug("Loading login information completed")):console.debug("Loading login information abandoned")},getUserPoints:function(){var e=this;this.$store.state.user.token&&(console.debug("Loading user points for company:",this.$store.state.company.companyName,this.$store.state.user.token),this.$http.post(this.$store.state.url+"/getPoints",{hash:this.$store.state.user.token,companyName:this.$store.state.company.companyName}).then((function(n){e.$store.commit("setPoints",n.data)})).catch((function(e){console.debug(e)})))},loadColorPalette:function(){var e=document.querySelector(":root").style,n=this.$store.state.company.design.colorPalette;e.setProperty("--store-primary",n.main),e.setProperty("--text-color",n.text),e.setProperty("--background-color",n.background),e.setProperty("--banner-color",n.banner)}}},N=P,$=(t("5c0b"),Object(m["a"])(N,a,r,!1,null,null,null)),E=$.exports,x=(t("d3b7"),t("8c4f"));o["a"].use(x["a"]);var _=[{path:"/",component:function(){return Promise.all([t.e("chunk-029ada6d"),t.e("chunk-1808acc2")]).then(t.bind(null,"78de"))}},{path:"/forgot-password",component:function(){return t.e("chunk-2d22c101").then(t.bind(null,"f243"))}},{path:"/terms-and-service",component:function(){return t.e("chunk-88bd8f20").then(t.bind(null,"99ea"))}},{path:"/terms-and-service-company",component:function(){return t.e("chunk-e99de860").then(t.bind(null,"b2d0"))}},{path:"/imprint",component:function(){return t.e("chunk-6b50f406").then(t.bind(null,"5a7f"))}},{path:"/privacy-policy",component:function(){return t.e("chunk-501208dc").then(t.bind(null,"729e"))}},{path:"/login",component:function(){return t.e("chunk-6575ea22").then(t.bind(null,"a55b"))}},{path:"/register",component:function(){return t.e("chunk-88f20fe6").then(t.bind(null,"1e7f"))}},{path:"/register/company",component:function(){return t.e("chunk-0a232284").then(t.bind(null,"7546"))}},{path:"/scan",component:function(){return Promise.all([t.e("chunk-61bb673a"),t.e("chunk-0d8ab08d")]).then(t.bind(null,"a1ef"))}},{path:"/cashier",component:function(){return Promise.all([t.e("chunk-61bb673a"),t.e("chunk-97e13c1e")]).then(t.bind(null,"369d"))}},{path:"/inventar",component:function(){return Promise.all([t.e("chunk-029ada6d"),t.e("chunk-d0a6f908")]).then(t.bind(null,"f01d"))}},{path:"/user",component:function(){return t.e("chunk-2cac923e").then(t.bind(null,"1511"))},children:[{path:"profile",component:function(){return t.e("chunk-9ac63260").then(t.bind(null,"7c54"))}},{path:"info",component:function(){return t.e("chunk-265625e2").then(t.bind(null,"a686"))}}]},{path:"/company",component:function(){return t.e("chunk-2d0deb55").then(t.bind(null,"8799"))},children:[{path:"coupons",component:function(){return Promise.all([t.e("chunk-029ada6d"),t.e("chunk-00acb6eb")]).then(t.bind(null,"218b"))}},{path:"coupons/edit",component:function(){return t.e("chunk-0428075d").then(t.bind(null,"fd38"))}},{path:"settings",component:function(){return t.e("chunk-4f99dd32").then(t.bind(null,"baec"))},children:[{path:"profile",component:function(){return Promise.all([t.e("chunk-5a9686e5"),t.e("chunk-7c849497")]).then(t.bind(null,"1ecd"))}},{path:"register",component:function(){return Promise.all([t.e("chunk-61bb673a"),t.e("chunk-6f1ad6de")]).then(t.bind(null,"95a2"))}},{path:"design",component:function(){return t.e("chunk-4bd02905").then(t.bind(null,"405b"))}},{path:"flyer",component:function(){return Promise.all([t.e("chunk-5a9686e5"),t.e("chunk-61f93812")]).then(t.bind(null,"d5b3"))}},{path:"location",component:function(){return t.e("chunk-c74d18e8").then(t.bind(null,"8fd2"))}},{path:"staff",component:function(){return t.e("chunk-34a673f4").then(t.bind(null,"c39e"))}},{path:"statistics",component:function(){return t.e("chunk-8fd28370").then(t.bind(null,"0b5c"))}},{path:"info",component:function(){return t.e("chunk-e22a679e").then(t.bind(null,"cd10"))}}]}]},{path:"/nearby",component:function(){return t.e("chunk-5c7250d3").then(t.bind(null,"c762"))}}],S=new x["a"]({routes:_}),j=(t("f9e3"),t("4989"),t("ad3d")),O=t("bc3a"),L=t.n(O),U=t("1157"),I=t.n(U),A=t("9483");Object(A["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var D=t("83f0");o["a"].component("font-awesome-icon",j["a"]),o["a"].component("font-awesome-layers",j["b"]),o["a"].component("font-awesome-layers-text",j["c"]),o["a"].use(c["a"]),o["a"].config.productionTip=!1,o["a"].prototype.$http=L.a,o["a"].prototype.$=I.a;var B=function(e,n){var t=[];n.modifiers.focus&&t.push("focus"),n.modifiers.hover&&t.push("hover"),n.modifiers.click&&t.push("click"),t.length||t.push("hover"),I()(e).tooltip({title:n.value,placement:n.arg||"top",trigger:t.join(" "),html:!!n.modifiers.html})};o["a"].directive("tooltip",{bind:B,update:B,unbind:function(e){I()(e).tooltip("dispose")}});var T=new c["a"].Store({state:{url:"https://www.freepoint.htl3r.com/api",loading:!1,user:{token:void 0,username:void 0,verified:!1,rights:0},company:{companyName:void 0,contactMail:void 0,conversionRate:void 0,domain:void 0,design:{logo:void 0,colorPalette:new D["a"]("#10cdb7","#2c3e50","#fafafa","#ffffff")}},points:0,coupons:[],couponsNew:[],couponsEdit:[],couponsDelete:[]},getters:{showVerification:function(e){return!e.user.verified&&void 0!==e.user.token},getPoints:function(e){return e.points},getDesign:function(e){return e.company.design.colorPalette}},mutations:{setLoading:function(e,n){e.loading=n},setVerification:function(e,n){e.user.verified=n},setUser:function(e,n){e.user=n},deleteUser:function(e){console.debug("Deleting userdata from VueX"),e.user={token:void 0,username:void 0,verified:void 0}},setCompany:function(e,n){e.company=n;var t=JSON.parse(n.design.colorPalette);console.debug("Company design",t),e.company.design.colorPalette=new D["a"](t[0],t[1],t[2],t[3])},setPoints:function(e,n){e.points=n},setDesign:function(e,n){e.company.design.colorPalette=n},setColorMain:function(e,n){e.company.design.colorPalettemain=n},setColorText:function(e,n){e.company.design.colorPalette.text=n},setColorBackground:function(e,n){e.company.design.colorPalette.background=n},setColorBanner:function(e,n){e.company.design.colorPalette.banner=n},setLogo:function(e,n){e.company.logo=n},setCoupons:function(e,n){e.coupons=n},resetCouponNew:function(e){e.couponsNew=[]},resetCouponEdit:function(e){e.couponsEdit=[]},resetCouponDelete:function(e){e.couponsDelete=[]},resetCouponAll:function(e){e.couponsNew=[],e.couponsEdit=[],e.couponsDelete=[]},pushCouponsNew:function(e,n){e.couponsNew.push(n)},pushCouponsEdit:function(e,n){console.debug("pushCouponsEdit",n),e.couponsEdit.splice(e.couponsEdit.findIndex((function(e){return e.id===n.id})),1),e.coupons.splice(e.coupons.findIndex((function(e){return e.id===n.id})),1),e.couponsEdit.push(n)},pushCouponsDelete:function(e,n){e.coupons.splice(e.coupons.findIndex((function(e){return e.id===n.id})),1),e.couponsNew.splice(e.couponsNew.findIndex((function(e){return e.id===n.id})),1),e.couponsEdit.splice(e.couponsEdit.findIndex((function(e){return e.id===n.id})),1),e.couponsDelete.push(n)}}});S.beforeEach((function(e,n,t){T.commit("setLoading",!1),T.state.user.token&&(o["a"].prototype.$http.post(T.state.url+"/checkLogin",{hash:T.state.user.token}).then((function(e){if(!e.data.valid)throw new Error;T.state.user.verified||(e.data.verified?(T.commit("setVerification",e.data.verified),localStorage.setItem("user",JSON.stringify(T.state.user)),console.debug("User verificated")):console.debug("User needs to verify"))})).catch((function(e){console.error(e),localStorage.removeItem("user"),T.commit("deleteUser")})),T.state.company.companyName&&o["a"].prototype.$http.post(T.state.url+"/getUserRights",{hash:T.state.user.token,companyName:T.state.company.companyName}).then((function(e){console.debug(e),T.state.user.rights=e.data}))),t()})),new o["a"]({router:S,store:T,render:function(e){return e(E)}}).$mount("#app")},"5c0b":function(e,n,t){"use strict";var o=t("9c0c"),c=t.n(o);c.a},"64c8":function(e,n,t){},"83f0":function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var o=t("d4ec"),c=t("bee2"),a=function(){function e(n,t,c,a){Object(o["a"])(this,e),this.main=n,this.text=t,this.background=c,this.banner=a}return Object(c["a"])(e,[{key:"toArray",value:function(){return[this.main,this.text,this.background,this.banner]}}]),e}()},"9c0c":function(e,n,t){},bf1d:function(e,n,t){e.exports=t.p+"img/Schriftzug.b068add8.svg"},d451:function(e,n,t){"use strict";var o=t("e918"),c=t.n(o);c.a},e887:function(e,n,t){"use strict";var o=t("64c8"),c=t.n(o);c.a},e918:function(e,n,t){}});
//# sourceMappingURL=app.687839dd.js.map